---
title: "Lab1"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(here)
```



```{r Q1}
set.seed(123) # Set random number generation

m <- lm(mpg ~ hp + cyl + drat, mtcars)

l <- list(a = list(m = matrix(1:12, ncol = 3),
              	   v = 1:7),
          b = data.frame(student = 1:15,
                         score = rnorm(15, 100, 10)))

summary(m)
```

Run the above code

# 1.From the model results:

## Extract the qr tolerance (tol).

```{r}

```

## Extract the term labels from the model.
hint: Use str to inspect the list. This one is tricky and involves pulling an attribute from an attribute.

```{r}

```

# From the list

## Use at least two different methods to extract m.

```{r}


```

## Extract the third column of m. Maintain the dimensions (matrix structure).

```{r}

```

## Extract the score for student 7.

```{r}

```


# **Loops**

## 3.Use the “airquality” dataset, which is part of base R. Split it by Month
```{r}
aq <- (airquality)
by_month <- split(aq, aq$Month)
str(by_month)
```

## 4.Use a for loop to calculate the mean Ozone by month (remember to remove missing data from the calculation)

```{r}

```
## 5.Replicate this calculation with lapply, sapply, and vapply

```{r}
lapply(by_month, function(x) mean(x$Ozone, na.rm=TRUE))

sapply(by_month, function(x) mean(x$Ozone, na.rm = TRUE))

vapply(by_month, function(x) {mean(x$Ozone, na.rm = TRUE)}, double(1))
```

## 6.Produce separate plots showing the relation between Ozone and Solar.R for each month (with a single loop).

```{r}
#lapply ggplot to Ozone and Solar.R columns for each name
q6plots<- lapply(names(by_month), function(x) {
          ggplot(by_month[[x]], aes(Ozone, Solar.R)) +
            geom_point() +
            ggtitle(paste("Relationship Between Ozone density and Solar radiation \nfor month", names(by_month[x]))) +
            theme_bw()
 }
  )
q6plots

# #for loop, not need
# sol_ozone <- vector("list", length(by_month))
# for(i in seq_along(sol_ozone)) {
#   sol_ozone[[i]] <- by_month[[i]][,1:2]
# }
# str(sol_ozone)
# plot(sol_ozone[[1]])


```

## 7.Use a for loop to save the plots to a folder on your computer

```{r}
#Directory specification
plots <- here::here("q6plots", paste0("month", names(by_month), ".png"))
plots

#Save to file
for (i in seq_along(q6plots)) {
  ggsave(plots[i],
         q6plots[[i]],
         device = "png",
         width = 6.5,
         height = 8)
}
```